<% @page_title = "Revision History for Event ##{@event.id}"%>

<p id="aaeid"><%= link_to "Event ##{@event.id}", event_path(@event) %></p>

<h1><%= link_to 'Revision History', history_event_path(@event.id) %> > Revision Comparison</h1>


<div class="revision_description">

    <p><% if @version == @event.versions.first %>
      <strong>Revision 0 (Original Question)</strong>
    <% else %>
      <strong>Revision <%= @previous_version.index + 1 %></strong>
    <% end %>
      by
    <p><%= link_to_learner_avatar(@previous_submitter, {image_size: :thumb}) %> <%= link_to_learner(@previous_submitter) %></p>
    at 
    <% if @version == @event.versions.first %>
      <%= @event.created_at %>
    <% else %>
      <%= @previous_version.created_at %>
    <% end %>
    <p>
  
    <p><strong>Revision <%= @version.index + 1 %></strong> by 
	<p><%= link_to_learner_avatar(@version_submitter, {image_size: :thumb}) %> <%= link_to_learner(@version_submitter) %></p>
    at <%= @version.created_at %>
  </p>

</div>

<% if defined?(@title_diff) && @title_diff.present? %>
  <div class="diff_box">
    <h3>Title Changes</h3>
    <p><%= @title_diff %></p>
  </div>
<% end %>

<% if defined?(@description_diff) && @description_diff.present? %>
  <div class="diff_box">
    <h3>Description Changes</h3>
    <p><%= @description_diff %></p>
  </div>
<% end %>

<%= form_tag(restore_event_path(version: @version.id)) do %>
  <p><% if @version == @event.versions.first %>
      <%= submit_tag "Restore Original Question", {:class => 'btn'} %>
    <% else %>
      <%= submit_tag "Restore Revision ##{@previous_version.index + 1}", {:class => 'btn btn-primary'} %>
    <% end %>
  </p>
<% end %>

